
import httplib2
from datetime import datetime
import json
import time


URL = 'http://dev.xlayer.in/loc_api/new_location'
imei = "351891081562230"
mob_num = "9584956125"
#This needs to be moved to some other File 
#Lat.Long list = [(lat,long), ....]
btm_agara=[(77.61924,12.9153),
          (77.61932,12.9156),
          (77.61963,12.91555),
          (77.61979,12.91553),
          (77.61983,12.91554),
          (77.61986,12.91555),
          (77.61988,12.91556),
          (77.6199,12.91559),
          (77.61992,12.91562),
          (77.61993,12.91567),
          (77.61993,12.91599),
          (77.61993,12.91611),
          (77.61995,12.91634),
          (77.61979,12.9163),
          (77.61955,12.91626),
          (77.61926,12.91624),
          (77.61865,12.91624),
          (77.61814,12.91621),
          (77.61777,12.9162),
          (77.6173,12.91618),
          (77.61695,12.9162),
          (77.61674,12.91617),
          (77.6157,12.91628),
          (77.61527,12.91632),
          (77.61519,12.91633),
          (77.61478,12.91637),
          (77.61443,12.9164),
          (77.61442,12.91595),
          (77.61425,12.91391),
          (77.61456,12.91384),
          (77.61492,12.9138),
          (77.61497,12.9138),
          (77.61508,12.91511),
          (77.61519,12.91633),
          (77.61519,12.91641),
          (77.61528,12.9164),
          (77.61628,12.9163),
          (77.61698,12.91626),
          (77.61742,12.91627),
	  (77.61788,12.91629),
          (77.61875,12.91634),
          (77.61892,12.91634),
          (77.61916,12.91635),
          (77.61948,12.91636),
          (77.61965,12.91639),
          (77.61981,12.91642),
          (77.61996,12.91645),
          (77.62021,12.91653),
          (77.62105,12.91678),
          (77.62164,12.91697),
          (77.62213,12.91714),
          (77.62266,12.9173),
          (77.62284,12.91737),
          (77.62291,12.91739),
          (77.62305,12.91743),
          (77.62334,12.9175),
          (77.62442,12.91768),
          (77.62463,12.9177),
          (77.62483,12.91771),
          (77.62505,12.91771),
          (77.62522,12.91772),
          (77.62538,12.91771),
          (77.62554,12.9177),
          (77.62565,12.91768),
          (77.62584,12.91764),
          (77.62625,12.91753),
          (77.62676,12.91737),
          (77.62758,12.91715),
          (77.62799,12.91703),
          (77.62829,12.91695),
          (77.62849,12.91691),
          (77.62866,12.91687),
          (77.62884,12.91685),
          (77.62923,12.91683),
          (77.63084,12.9167),
          (77.63165,12.91664),
          (77.63228,12.91659),
          (77.63237,12.91658),
          (77.6328,12.91654),
	  (77.63463,12.91637),
          (77.63504,12.91634),
          (77.63558,12.9163),
          (77.63586,12.91628),
          (77.63626,12.91624),
          (77.63666,12.91619),
          (77.63696,12.91615),
          (77.63747,12.91607),
          (77.63768,12.91605),
          (77.63782,12.91603),
          (77.63792,12.91602),
          (77.63803,12.91602),
          (77.63818,12.91603),
          (77.63832,12.91604),
          (77.63847,12.91606),
          (77.63862,12.91609),
          (77.6388,12.91614),
          (77.63897,12.9162),
          (77.63939,12.91636),
          (77.63955,12.91642),
          (77.63965,12.91647),
          (77.63976,12.91653),
          (77.63985,12.91658),
          (77.63993,12.91663),
          (77.64004,12.91671),
          (77.64017,12.91681),
          (77.64065,12.91722),
          (77.64078,12.91731),
          (77.6409,12.91741),
          (77.64111,12.91759),
          (77.64156,12.91805),
          (77.64176,12.91827),
          (77.64194,12.91849),
          (77.64216,12.91876),
          (77.64232,12.91899),
          (77.64303,12.91991),
          (77.64344,12.92042),
          (77.64417,12.92129),
          (77.64438,12.92154),
          (77.64464,12.92184),
          (77.6448,12.922),
          (77.64492,12.92212),
          (77.64625,12.92332),
          (77.64638,12.92343),
          (77.64646,12.9235),
          (77.64654,12.92356),
          (77.64665,12.92364),
          (77.64675,12.9237),
          (77.64718,12.92396),
          (77.64732,12.92403),
          (77.64754,12.92415),
          (77.648,12.92432),
          (77.64824,12.92438),
          (77.6485,12.92442),
          (77.64882,12.92446),
          (77.64924,12.92448),
          (77.64977,12.92452),
          (77.6499,12.92453),
          (77.65024,12.92453),
          (77.65038,12.92453),
          (77.65061,12.92452),
          (77.65083,12.9245),
          (77.65105,12.92447),
          (77.65128,12.92443),
          (77.65155,12.92438),
          (77.65173,12.92434),
          (77.65204,12.92428),
          (77.6525,12.92418),
          (77.6538,12.92392),
          (77.65401,12.92387)]





def random_movement():
    l=len(btm_agara)
    count=0 
    while True:
        lng=btm_agara[count][0]
        lat=btm_agara[count][1]

	if count>=l-1:
	    print('Reached the Destination')
	    break	
	count+=1


	data = {"longitude": lng, "mobile_number": mob_num,
            "type":"android", "imei":imei, "latitude": lat}
        print(data)
        client = httplib2.Http()
        resp, content = client.request(URL,
                          'POST',
                          json.dumps(data),
                          headers={'content-Type': 'application/json'})
        time.sleep(3)
	print(resp)

	if resp['status']== 500 and resp['content-length']== 0:
		print('ERROR: Request json format is not correct ') 
		break


random_movement()
